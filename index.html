<script>
  const textElement = document.getElementById("text");
  const audio = document.getElementById("audio");

  const lines = [
    "rewind me.",
    "it only sounds like silence.",
    "but there's always an echo."
  ];

  let lineIndex = 0;
  let wordIndex = 0;
  let words = [];

  function typeNextWord() {
    if (lineIndex < lines.length) {
      if (words.length === 0) {
        words = lines[lineIndex].split(" ");
        textElement.textContent += "\n";
      }

      if (wordIndex < words.length) {
        textElement.textContent += words[wordIndex] + " ";
        wordIndex++;
        setTimeout(typeNextWord, 400 + Math.random() * 300);
      } else {
        wordIndex = 0;
        words = [];
        lineIndex++;
        setTimeout(typeNextWord, 800);
      }
    }
  }

  window.addEventListener("DOMContentLoaded", () => {
    typeNextWord();
  });

  let started = false;
  document.body.addEventListener("click", () => {
    if (!started) {
      started = true;
      audio.play().catch(() => {});
      plausible('sound_played');  // üîç –æ—Ç–ø—Ä–∞–≤–ª—è–µ–º –∫–∞—Å—Ç–æ–º–Ω–æ–µ —Å–æ–±—ã—Ç–∏–µ
    }
  });
</script>
